{"version":3,"file":"static/js/68383.b6b99e2a.chunk.js","mappings":"uZAI8a,MAAMA,EAAEA,CAACA,EAAEC,KAAK,IAAIC,EAAE,cAAcC,EAAAA,EAAEC,iBAAiBC,EAAAA,EAAEC,kBAAkBC,EAAAA,EAAEC,aAAaR,MAAMS,WAAAA,CAAYC,GAAGC,MAAMD,EAAE,CAACE,UAAAA,GAAa,CAAC,aAAIC,GAAY,OAAOC,KAAKC,WAAW,CAAC,YAAIC,GAAW,OAAOF,KAAKD,WAAWC,KAAKG,YAAY,CAAC,WAAIC,GAAS,IAAAC,EAAC,QAAqB,QAAdA,EAACL,KAAKM,gBAAQ,IAAAD,IAAbA,EAAeD,QAAO,CAAC,WAAIA,CAAQR,GAAGI,KAAKO,gBAAgB,UAAUX,EAAE,CAAC,eAAIY,GAAa,IAAAC,EAAAC,EAAC,MAAMd,EAAEA,GAAG,MAAMA,EAAEA,EAAE,EAAE,OAAOA,EAAe,QAAda,EAACT,KAAKM,gBAAQ,IAAAG,OAAA,EAAbA,EAAeE,SAASf,EAAa,QAAZc,EAACV,KAAKY,cAAM,IAAAF,OAAA,EAAXA,EAAaF,YAAY,CAACP,SAAAA,GAAW,IAAAY,EAAAC,EAAC,QAAkB,QAAZD,EAACb,KAAKY,cAAM,IAAAC,GAAXA,EAAad,aAAoB,QAAXe,EAAEd,KAAKe,YAAI,IAAAD,OAAA,EAATA,EAAWE,QAAOhB,KAAKI,UAAS,CAAE,CAACD,UAAAA,GAAa,OAAM,CAAE,GAAG,OAAOP,EAAAA,EAAAA,GAAE,EAACqB,EAAAA,EAAAA,OAAK7B,EAAE8B,UAAU,gBAAW,IAAQtB,EAAAA,EAAAA,GAAE,EAACqB,EAAAA,EAAAA,OAAK7B,EAAE8B,UAAU,cAAS,IAAQtB,EAAAA,EAAAA,GAAE,EAACqB,EAAAA,EAAAA,OAAK7B,EAAE8B,UAAU,YAAO,IAAQtB,EAAAA,EAAAA,GAAE,EAACqB,EAAAA,EAAAA,IAAE,CAACE,UAAS,KAAM/B,EAAE8B,UAAU,YAAY,OAAMtB,EAAAA,EAAAA,GAAE,EAACqB,EAAAA,EAAAA,IAAE,CAACG,KAAKC,QAAQF,UAAS,KAAM/B,EAAE8B,UAAU,WAAW,OAAMtB,EAAAA,EAAAA,GAAE,EAACqB,EAAAA,EAAAA,OAAK7B,EAAE8B,UAAU,UAAU,OAAMtB,EAAAA,EAAAA,GAAE,EAACqB,EAAAA,EAAAA,OAAK7B,EAAE8B,UAAU,cAAc,MAAM9B,GAAEQ,EAAAA,EAAAA,GAAE,EAAC0B,EAAAA,EAAAA,GAAE,gDAAgDlC,GAAGA,G,ICArjCmC,EAAY3B,E,iEAAAA,EAAyE2B,IAAIA,EAAE,CAAC,IAA3E3B,EAAE4B,MAAM,GAAG,QAAQ5B,EAAEA,EAAE6B,UAAU,GAAG,YAAY7B,EAAEA,EAAE8B,KAAK,GAAG,OAAsC,SAASrC,EAAEO,GAAG,OAAOA,EAAE+B,WAAWP,MAAM,IAAI,QAAQ,MAAM,CAACQ,KAAKL,EAAEC,OAAO,IAAI,aAAa,MAAM,CAACI,KAAKL,EAAEE,UAAUI,cAAapC,EAAAA,EAAAA,IAAEG,EAAE+B,WAAWG,MAAM,CAAC,IAAI,IAAI,QAAQ,MAAM,CAACF,KAAKL,EAAEG,MAAM,CAAC,SAASK,EAAEnC,EAAEH,GAAG,GAAG,MAAMA,EAAE,OAAOG,EAAEoC,MAAM,GAAG,OAAOpC,EAAEiC,aAAa,MAAM,OAAOpC,EAAEmC,MAAM,KAAKL,EAAEC,MAAM,OAAO,KAAKD,EAAEE,UAAU,OAAO7B,EAAEoC,MAAM,GAAG,OAAOpC,EAAEiC,aAAapC,EAAEoC,cAAc,KAAKN,EAAEG,KAAK,OAAO9B,EAAEoC,MAAM,GAAG,EAAEpC,EAAEoC,MAAM,GAAG,EAAEpC,EAAEoC,MAAM,GAAG,EAAEpC,EAAEoC,MAAM,IAA5b,IAAkcpC,EAAEqC,aAAaX,EAAAA,GAAEY,QAAQtC,EAAEuC,aAAY,EAAGvC,EAAEwC,UAAS,OAAQxC,EAAEiC,aAAiC,SAAWjC,GAAG,OAAO,MAAMA,EAAE,MAAMyC,EAAEC,eAAe1C,IAAIyC,EAAEE,eAAwD,SAAW9C,GAAG,MAAM6B,GAAE1B,EAAAA,EAAAA,IAAEH,EAAEuC,OAAO,OAAOV,EAAE,IAAxrB,MAA6rBkB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK/C,GAAC,IAACuC,MAAMV,GAAE,CAAvGnC,CAAES,GAAGyC,EAAEC,aAAa1C,GAAGyC,EAAEE,eAAe,CAArItB,CAAErB,EAAEiC,eAAe,CAAkL,MAAMQ,EAAE,CAACE,eAAe,KAAKD,aAAa,M,qGCA1yB,MAAMhB,UAAU1B,EAAAA,EAAED,WAAAA,GAAcE,SAAS4C,WAAWzC,KAAKM,SAAS,IAAI,CAAC,YAAIJ,GAAW,OAAM,CAAE,CAAC,aAAIH,GAAY,OAAM,CAAE,CAAC,mBAAI2C,GAAkB,MAAM,EAAE,CAAC,UAAIC,GAAS,OAAO,IAAI,CAAC,UAAIA,CAAOlD,GAAG,MAAM,IAAImD,MAAM,kBAAkB,CAACC,aAAAA,CAAcpD,EAAEG,GAAG,MAAM,IAAIgD,MAAM,kBAAkB,CAACE,cAAAA,CAAerD,EAAEG,GAAG,MAAM,IAAIgD,MAAM,kBAAkB,CAACG,iBAAAA,CAAkBtD,EAAEG,GAAG,MAAM,IAAIgD,MAAM,kBAAkB,CAACI,WAAAA,GAAc,MAAM,IAAIJ,MAAM,kBAAkB,CAACK,WAAAA,CAAYxD,EAAEG,GAAG,MAAM,IAAIgD,MAAM,kBAAkB,CAACM,SAAAA,CAAUzD,GAAG,MAAM,IAAImD,MAAM,kBAAkB,GAAEnD,EAAAA,EAAAA,GAAE,EAACF,EAAAA,EAAAA,OAAK+B,EAAEJ,UAAU,gBAAW,IAAQzB,EAAAA,EAAAA,GAAE,EAACF,EAAAA,EAAAA,OAAK+B,EAAEJ,UAAU,kBAAkB,OAAMzB,EAAAA,EAAAA,GAAE,EAACF,EAAAA,EAAAA,OAAK+B,EAAEJ,UAAU,SAAS,M,oCCA0qC,IAAIiC,EAAE,eAAcC,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,GAAEC,EAAEC,OAAO7D,WAAAA,CAAYC,GAAGC,MAAMD,GAAGI,KAAKoB,KAAK,iCAAiCpB,KAAKyD,kBAAkB,QAAQzD,KAAK0D,mBAAkB,EAAG1D,KAAK2D,eAAe,GAAG3D,KAAK4D,sBAAsB,EAAE5D,KAAK6D,aAAa,IAAI,CAAC,YAAIC,GAAW,OAAO9D,KAAKM,QAAQ,CAAC,gBAAIyD,GAAe,OAAO/D,KAAKgE,UAAUC,GAAG,CAAC,WAAIC,GAAU,OAAOlE,KAAKM,SAAS6D,MAAMC,EAAE,CAAC,cAAIC,GAAa,OAAOrE,KAAKM,SAAS8D,EAAE,CAAC,mCAAIE,GAAiC,IAAAC,EAAC,OAAOvE,KAAKM,SAASkE,eAAcC,EAAAA,EAAAA,IAAEzE,KAAKM,SAAkC,QAA1BiE,EAACvE,KAAKgE,UAAUjD,KAAK2D,aAAK,IAAAH,OAAA,EAAzBA,EAA2BI,4BAA4B,CAAC7E,UAAAA,GAAaE,KAAK4E,iBAAiBC,KAAK,IAAI7E,KAAK8E,eAAelF,IAAI,MAAMA,GAAGmF,EAAAA,EAAEC,aAAapF,GAAG,MAAMI,KAAKiF,WAAWjF,KAAKiF,WAAW,IAAIF,EAAAA,EAAE,CAACG,WAAWtF,EAAEuF,iBAAiBnF,KAAKM,SAAS8E,YAAYC,gBAAgBzF,GAAGI,KAAKsF,iBAAiB1F,GAAG2F,aAAaA,CAAC3F,EAAEH,IAAIO,KAAKuF,aAAa3F,EAAEH,EAAEO,KAAKwF,UAAUC,cAAcA,CAAC7F,EAAEH,IAAIO,KAAKyF,cAAc7F,EAAEH,KAAKO,KAAKiF,WAAWC,WAAWtF,EAAEI,KAAKiF,YAAWhE,EAAAA,EAAAA,IAAEjB,KAAKiF,cAAc3D,EAAAA,IAAGtB,KAAK4E,iBAAiBC,KAAK,IAAI,CAAC7E,KAAKM,SAASoF,SAAS1F,KAAK2F,2BAA2B3F,KAAK4F,0BAA0B,IAAI5F,KAAK6F,0BAA0B7F,KAAK4E,iBAAiBC,KAAK,IAAI7E,KAAKM,SAASoF,WAAW9F,GAAGI,KAAK8F,gBAAgBlG,IAAIT,EAAAA,IAAG,MAAMS,EAAEA,IAAII,KAAK+F,gBAAgB/F,KAAK4E,iBAAiBC,KAAK,IAAI7E,KAAKgG,4BAA4BpG,GAAGI,KAAK4E,iBAAiBC,KAAK,SAAAoB,EAAA,OAAmB,QAAnBA,EAAIjG,KAAKiF,kBAAU,IAAAgB,OAAA,EAAfA,EAAiBC,kBAAiBtG,GAAGI,KAAK4E,iBAAiBC,KAAK,SAAAsB,EAAA,OAAmB,QAAnBA,EAAInG,KAAKiF,kBAAU,IAAAkB,OAAA,EAAfA,EAAiBC,oBAAmBxG,GAAGI,KAAK4E,iBAAiBC,KAAK,IAAI7E,KAAKqG,6BAA6BzG,GAAGI,KAAK4E,iBAAiBC,KAAK,IAAI7E,KAAK8E,cAAclF,GAAGI,KAAK4E,iBAAiBC,KAAK,SAAAyB,EAAAC,EAAA,MAAI,CAAgB,QAAhBD,EAACtG,KAAKiF,kBAAU,IAAAqB,OAAA,EAAfA,EAAiBE,eAA0B,QAAZD,EAACvG,KAAK2C,cAAM,IAAA4D,OAAA,EAAXA,EAAaE,wBAAuB,IAAIzG,KAAK0G,0BAA0B1G,KAAK4E,iBAAiBC,KAAK,IAAI7E,KAAK2G,0BAA0B,IAAI3G,KAAK4G,4BAA4BzH,EAAAA,IAAGa,KAAK6G,oBAAoB7G,KAAK6F,wBAAwB,CAAC,aAAIiB,GAAY,OAAO9G,KAAKe,KAAKgG,gBAAgBC,aAAaC,OAAOH,SAAS,CAAC,2BAAIH,GAA0B,MAAM,aAAa3G,KAAKM,SAAS4G,UAAU,GAAGlH,KAAKgE,UAAUmD,kBAAkBC,KAAKC,IAAS,IAAK9H,GAAZK,EAAEH,GAAE4H,EAAU,IAAI9H,EAAEL,EAAAA,QAAEoI,OAAO1H,EAAE,CAACwF,YAAYpF,KAAKM,SAAS8E,aAAa,CAAC,MAAM7D,GAAG,OAAOlC,EAAAA,EAAEkI,UAAUvH,MAAMwH,MAAM,qCAAqCjG,GAAG,IAAI,CAAC,IAAIhC,EAAEkI,eAAe,OAAOpI,EAAAA,EAAEkI,UAAUvH,MAAMwH,MAAM,mDAAmD,KAAK,MAAMvG,EAAE,GAAG7B,EAAEG,EAAEmI,WAAW,OAAOC,EAAAA,EAAAA,GAAEvI,EAAEY,KAAKM,SAAS8E,YAAY,CAACwC,cAAc3G,IAAIA,EAAE4G,OAAO,GAAGxI,EAAAA,EAAEkI,UAAUvH,MAAMwH,MAAM,+CAADM,OAAgD7G,EAAE8G,KAAK,QAAS,MAAM,CAACxI,EAAEE,MAAMkD,QAAQ/C,GAAG,MAAMA,GAAG,CAAC,UAAI+C,GAAS,OAAO3C,KAAKgI,KAAK,SAAS,CAAC,UAAIrF,CAAO/C,GAAGI,KAAKiI,KAAK,SAASlD,EAAAA,EAAEC,aAAapF,GAAGA,EAAE,KAAK,CAACO,UAAAA,GAAY,IAAA+H,EAAAC,EAAC,OAAOtI,MAAMM,cAAwC,QAA5B+H,EAAkB,QAAlBC,EAAGnI,KAAKiF,kBAAU,IAAAkD,OAAA,EAAfA,EAAiBjI,gBAAQ,IAAAgI,GAAAA,CAAK,CAACtB,wBAAAA,GAA2B,MAAMhH,EAAEI,KAAK2G,wBAAwB/G,EAAEiI,OAAO,EAAE7H,KAAKoI,uBAAuB,CAAC3I,EAAEF,KAAK,IAAI,MAAM0B,EAAE7B,KAAKQ,EAAE,IAAI,GAAGqB,EAAEoH,YAAY5I,GAAG,OAAO6I,EAAE/I,EAAEH,EAAE,CAAC,MAAMC,GAAGW,KAAKwF,SAASnG,EAAE,CAAC,OAAOiJ,EAAE/I,EAAE,QAAQS,KAAK4F,wBAAwB5F,KAAKoI,sBAAsB,KAAK,KAAK,CAAC,0BAAIxC,GAAyB,OAAO2C,EAAAA,EAAAA,IAAEvI,KAAKM,SAAS8E,YAAYpF,KAAK2G,wBAAwB6B,QAAQ,CAAC5I,EAAC6I,KAAA,IAAEhJ,GAAEgJ,EAAA,OAAG7I,EAAEkI,OAAOrI,EAAEiI,cAAa,IAAIgB,OAAO,CAAC,mBAAIhG,GAAkB,MAAM9C,EAAEI,KAAKM,SAASb,EAAEG,EAAEwF,YAAY,IAAI7F,EAAES,KAAK2D,eAAe,GAAG/D,EAAE+I,WAAW/I,EAAEuE,MAAMwE,UAAU,CAAC,MAAMtJ,EAAE,IAAIO,EAAE+I,WAAW,MAAM/I,EAAEuE,MAAMwE,WAAW,IAAIpJ,EAAE,KAAIwC,EAAAA,EAAAA,IAAEtC,EAAEJ,MAAME,EAAE,CAAC,OAAOgJ,EAAAA,EAAAA,IAAE9I,EAAEF,EAAE,CAACqJ,mBAAAA,CAAoBhJ,GAAG,OAAO,IAAIH,EAAAA,EAAE,CAACoJ,WAAWjJ,EAAEuE,MAAMnE,KAAKM,SAAS6D,MAAM2E,YAAY9I,KAAKM,UAAU,CAACL,SAAAA,GAAY,OAAOJ,MAAMI,cAAa8I,EAAAA,EAAAA,IAAE/I,KAAK8D,SAASkF,oBAAoBhJ,KAAKe,KAAKkI,UAAUjJ,KAAKkJ,aAAalJ,KAAKkJ,YAAYC,gBAAgB,CAAC,oCAAMC,CAA+BxJ,EAAEH,GAAG,MAAMF,EAAES,KAAKqJ,4BAA4B5J,GAAG,GAAGF,EAAE,MAAMA,EAAE,GAAG,IAAIK,EAAEiI,OAAO,MAAM,GAAG,MAAM5G,EAAE,GAAGK,EAAE,GAAGnC,EAAE,MAAMa,KAAKM,SAASgJ,sBAAsBtJ,KAAKM,SAASgJ,gBAAgBC,KAAK9J,GAAGO,KAAKM,SAASkJ,GAAEzH,EAAAA,EAAAA,IAAE/B,KAAKM,SAAS8E,kBAAkBqE,EAAAA,EAAAA,IAAEtK,GAAEuK,EAAAA,EAAAA,IAAE1J,KAAKM,SAASb,MAAKL,EAAAA,EAAAA,IAAEK,GAAG,MAAM4C,EAAE,IAAIsH,IAAI,IAAI,MAAMtK,KAAKO,GAAEgK,EAAAA,EAAAA,IAAEvK,EAAEmK,EAAEnH,GAAGf,EAAEuI,KAAKxK,GAAG4B,EAAE4I,KAAKxK,GAAG,OAAO,IAAIiC,EAAEuG,OAAO5G,GAAG,MAAMjB,KAAKM,SAASgJ,uBAAuBtJ,KAAKM,SAASgJ,gBAAgBC,OAAOO,OAAO,IAAIzK,EAAAA,EAAEkI,UAAUvH,MAAM+J,KAAK,kGAAkG/J,KAAKgK,sBAAsB1I,EAAEoH,MAAMuB,KAAK5H,IAAIyH,OAAOlK,KAAI2B,EAAAA,EAAAA,IAAE3B,GAAG0B,KAAK4I,MAAMtK,GAAGqB,EAAE6G,OAAOlI,KAAK,CAAC,2BAAMiG,GAAwB,MAAMjG,GAAE2I,EAAAA,EAAAA,IAAEvI,KAAKM,SAAS8E,YAAY,IAAIpF,KAAKM,SAASoF,eAAe1F,KAAKM,SAASoF,SAASyE,kBAAkBnK,KAAKM,SAAS8E,aAAa,MAAMpF,KAAK2F,8BAA8B3F,KAAK4F,yBAAyB5F,KAAKiI,KAAK,iBAAiBrI,EAAE,CAACyJ,2BAAAA,CAA4BzJ,GAAG,MAAMU,SAASb,GAAGO,MAAMwE,aAAanF,GAAGI,EAAE,OAAOJ,GAAEqK,EAAAA,EAAAA,IAAEjK,EAAEG,QAAG,EAAO,IAAIL,EAAAA,EAAE,8CAA8C,yCAAyC,CAACe,SAASb,IAAI,IAAIF,EAAAA,EAAE,8CAA8C,sBAAsB,CAACe,SAASb,GAAG,CAAC2K,UAAAA,GAAY,IAAAC,EAAC,MAAMzK,EAAEC,MAAMuK,aAAa,OAAOpK,KAAKuF,aAAa3F,EAAEI,KAAKgG,2BAA2BhG,KAAKwF,UAAyB,QAAhB6E,EAACrK,KAAKiF,kBAAU,IAAAoF,GAAfA,EAAiBC,WAAW1K,EAAEI,KAAKe,KAAKf,KAAKkJ,YAAYqB,SAASvK,KAAKwK,aAAa5K,CAAC,CAACoD,WAAAA,GAAc,MAAMpD,EAAE,CAAC+I,UAAU,CAAC,KAAK8B,gBAAe,EAAGC,oBAAoB1K,KAAKe,KAAK4J,kBAAkB,OAAO,MAAM3K,KAAK2C,OAAO3C,KAAK2C,OAAOK,YAAYpD,GAAG,IAAIgL,EAAAA,EAAEhL,EAAE,CAACqD,WAAAA,CAAYrD,EAAEH,GAAG,OAAOO,KAAK6K,qBAAqBC,sBAAsB9K,KAAK+K,aAAanL,GAAI,OAADH,QAAC,IAADA,OAAC,EAADA,EAAGuL,OAAO,CAACjI,iBAAAA,CAAkBnD,EAAEH,GAAG,OAAOO,KAAK6K,qBAAqBI,qBAAqBjL,KAAK+K,aAAanL,GAAI,OAADH,QAAC,IAADA,OAAC,EAADA,EAAGuL,OAAO,CAACnI,aAAAA,CAAcjD,EAAEH,GAAG,OAAOO,KAAK6K,qBAAqBK,aAAalL,KAAK+K,aAAanL,GAAI,OAADH,QAAC,IAADA,OAAC,EAADA,EAAGuL,QAAQd,MAAMtK,IAAI,GAAK,OAADA,QAAC,IAADA,IAAAA,EAAGuL,SAAS,OAAOvL,EAAE,MAAMH,EAAEO,KAAKM,SAASf,EAAEE,EAAE0E,MAAM,IAAI,MAAM9E,KAAKO,EAAEuL,SAAS9L,EAAE8E,MAAM5E,EAAEF,EAAEyJ,YAAYrJ,EAAE,OAAOG,IAAI,CAAC,oBAAMkD,CAAelD,EAAEH,GAAG,aAAaO,KAAK6K,qBAAqBO,mBAAmBpL,KAAK+K,aAAanL,GAAI,OAADH,QAAC,IAADA,OAAC,EAADA,EAAGuL,SAASrI,OAAO0I,EAAAA,GAAE,CAACR,kBAAAA,GAAoB,IAAAS,EAAC,OAAwB,QAAjBA,EAAAtL,KAAK6D,oBAAY,IAAAyH,IAAjBtL,KAAK6D,aAAe7D,KAAKuL,sBAAqBvL,KAAK6D,YAAY,CAAC0H,kBAAAA,GAAqB,MAAM3L,GAAE4L,EAAAA,EAAAA,IAAExL,KAAKe,KAAK4J,iBAAiB3K,KAAKe,KAAK0K,uBAAuBzL,KAAKwK,aAAa,OAAO,IAAIkB,EAAAA,EAAE,CAAC1H,UAAUhE,KAAK2L,SAASC,EAAAA,GAAEC,qBAAqBC,aAAa,IAAIC,EAAAA,EAAE,CAACC,eAAe,IAAIC,EAAAA,EAAE,CAACC,cAAclM,KAAKM,SAAS4L,cAAcC,qBAAqBnM,KAAKM,SAAS6L,qBAAqBC,iBAAiBxM,IAAIyM,eAAeA,CAACzM,EAAEH,IAAIO,KAAKsM,iBAAiB,CAAC7M,EAAEF,EAAEF,IAAIO,EAAE,IAAI2M,EAAAA,EAAE9M,EAAEF,EAAEF,KAAKI,EAAE+M,EAAAA,GAAEC,WAAWL,iBAAiBxM,EAAE8M,wBAAuBC,EAAAA,EAAAA,IAAE3M,KAAKM,UAAUsM,qBAAqB5M,KAAKe,KAAK4J,oBAAoB,CAACI,YAAAA,CAAanL,GAAG,OAAOI,KAAK6M,gCAAgC,MAAMjN,EAAEI,KAAKgD,cAAc4H,EAAAA,EAAEX,KAAKrK,GAAG,IAAGA,EAAAA,EAAAA,GAAE,EAAC4J,EAAAA,EAAAA,OAAKrG,EAAEjC,UAAU,WAAW,OAAMtB,EAAAA,EAAAA,GAAE,EAAC4J,EAAAA,EAAAA,OAAKrG,EAAEjC,UAAU,iBAAY,IAAQtB,EAAAA,EAAAA,GAAE,EAAC4J,EAAAA,EAAAA,OAAKrG,EAAEjC,UAAU,YAAY,OAAMtB,EAAAA,EAAAA,GAAE,EAAC4J,EAAAA,EAAAA,IAAE,CAACrI,UAAS,KAAMgC,EAAEjC,UAAU,0BAA0B,OAAMtB,EAAAA,EAAAA,GAAE,EAAC4J,EAAAA,EAAAA,IAAE,CAACpI,KAAK0L,EAAAA,KAAK3J,EAAEjC,UAAU,SAAS,OAAMtB,EAAAA,EAAAA,GAAE,EAAC4J,EAAAA,EAAAA,OAAKrG,EAAEjC,UAAU,kBAAa,IAAQtB,EAAAA,EAAAA,GAAE,EAAC4J,EAAAA,EAAAA,IAAE,CAACpI,KAAK,CAAC2L,QAAQ5L,UAAS,KAAMgC,EAAEjC,UAAU,yBAAyB,OAAMtB,EAAAA,EAAAA,GAAE,EAAC4J,EAAAA,EAAAA,IAAE,CAACpI,KAAK,CAAC2L,QAAQ5L,UAAS,KAAMgC,EAAEjC,UAAU,sBAAiB,IAAQtB,EAAAA,EAAAA,GAAE,EAAC4J,EAAAA,EAAAA,IAAE,CAACpI,KAAK,CAAC2L,QAAQ5L,UAAS,KAAMgC,EAAEjC,UAAU,kBAAkB,MAAMiC,GAAEvD,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,GAAE,yDAAyDc,G,2DCAtrR,MAAMlC,WAAUrB,EAAAA,EAAED,WAAAA,CAAYF,GAAGI,MAAMJ,GAAGO,KAAKmE,MAAM,KAAKnE,KAAKgN,cAAc,IAAI,CAAC9J,SAAAA,CAAUzD,GAAG,MAAM,IAAImD,MAAM,kBAAkB,GAAEnD,EAAAA,EAAAA,GAAE,EAAC6B,EAAAA,EAAAA,OAAKL,GAAEC,UAAU,aAAQ,IAAQzB,EAAAA,EAAAA,GAAE,EAAC6B,EAAAA,EAAAA,OAAKL,GAAEC,UAAU,qBAAgB,GCA+lC,MAAMqC,GAAED,EAAE7D,EAAAA,GAAG,IAAIwN,GAAE,eAAczJ,EAAAA,EAAAA,GAAE0J,KAAIvN,WAAAA,CAAYC,GAAGC,MAAMD,GAAGI,KAAKoB,KAAK,oBAAoBpB,KAAKgN,cAAc,IAAIzN,EAAAA,EAAES,KAAKmN,uBAAuB,IAAIC,IAAIpN,KAAKqN,iBAAiB,IAAIC,gBAAgBtN,KAAKuN,mBAAmB,EAAEvN,KAAKwN,0BAA0B,IAAIJ,IAAIpN,KAAKyN,qBAAoB,CAAE,CAAC,oBAAIC,GAAkB,IAAAC,EAAC,MAAM/N,EAAEI,KAAKmE,MAAMyJ,eAAenO,EAAE,MAAMG,EAAEI,KAAKmE,MAAM0J,QAAQC,MAAMrO,GAAGA,EAAE2E,KAAKxE,IAAI,KAAKL,EAAE,MAAME,EAAgB,QAAfkO,EAAClO,EAAEsO,oBAAY,IAAAJ,OAAA,EAAdA,EAAgBG,MAAMlO,GAAG,UAAUA,EAAE+B,WAAWP,OAAO,KAAK,OAAO7B,EAAEA,EAAEmO,iBAAiB,IAAI,CAAC,qBAAIvG,GAAoB,MAAMvH,EAAEI,KAAKmE,MAAMyJ,eAAenO,EAAE,MAAMG,EAAEI,KAAKmE,MAAM0J,QAAQC,MAAMrO,GAAGA,EAAE2E,KAAKxE,IAAI,KAAK,OAAQ,OAADH,QAAC,IAADA,GAAAA,EAAGsO,aAAatO,EAAEsO,aAAaC,UAAU5G,KAAKxH,IAAC,IAAAqO,EAAA,MAAE,CAAmB,QAAnBA,EAACrO,EAAE8N,wBAAgB,IAAAO,EAAAA,EAAE,GAAGhC,EAAErM,OAAM,EAAE,CAAC,yBAAIsO,GAAwB,MAAMtO,EAAEI,KAAKgN,cAAcvN,EAAEO,KAAKuN,oBAAoB3N,EAAEA,EAAEiI,OAAO,GAAG,OAAOjI,EAAE4I,QAAQ,CAAC5I,EAAEH,IAAIG,EAAEH,EAAE0O,kBAAkB,GAAG1O,CAAC,CAAC,yBAAI2O,GAAwB,OAAO5C,EAAAA,EAAAA,IAAExL,KAAKmE,MAAM6E,oBAAoBhJ,KAAKe,KAAKkI,MAAM,CAAC9I,UAAAA,GAAa,OAAOH,KAAKuN,mBAAmB,GAAGvN,KAAKgN,eAAehN,KAAKgN,cAAcqB,MAAMzO,GAAGA,EAAEM,UAAU,CAACJ,UAAAA,IAAa0M,EAAAA,EAAAA,IAAExM,KAAKmE,MAAMwG,iBAAiB3K,KAAKe,KAAK4J,iBAAiB3K,KAAKe,KAAKuN,aAAatO,KAAKuO,yBAAyBvO,KAAKmE,MAAMqK,UAAUxO,KAAK,CAACyO,OAAAA,GAAUzO,KAAKgN,gBAAgBhN,KAAKgN,cAAc0B,SAAS9O,GAAGA,EAAE6O,YAAYzO,KAAKgN,cAAc,MAAMhN,KAAKmN,uBAAuB,KAAKnN,KAAKqN,kBAAiBjO,EAAAA,EAAAA,IAAEY,KAAKqN,iBAAiB,CAACkB,wBAAAA,CAAyB3O,EAAEH,GAAG,MAAMF,EAAES,KAAKX,EAAEW,KAAKe,KAAKnB,EAAE8O,SAAS9O,IAAI,IAAIA,EAAE+O,QAAQ,GAAG,mBAAmB/O,EAAEwB,KAAK,CAAC,MAAM7B,EAAE,IAAIgE,GAAE,CAACjD,SAASV,EAAEmB,KAAK1B,EAAEuB,OAAOnB,IAAIO,KAAKuO,yBAAyB3O,EAAE4O,UAAUjP,EAAE,KAAK,SAASK,EAAEgP,cAAc5O,KAAKuN,qBAAqB3N,EAAE2J,KAAK,CAACyB,OAAOhL,KAAKqN,iBAAiBrC,SAASd,MAAM,KAAK,MAAMjJ,EAAE,IAAIqH,EAAE,CAAChI,SAASV,EAAEoE,UAAUzE,EAAEwB,KAAK1B,EAAEuB,OAAOnB,IAAIO,KAAKgN,cAAcnD,KAAK5I,GAAG,MAAMK,EAAEtB,KAAKwN,0BAA0BqB,IAAIjP,GAAG,GAAG0B,EAAE,CAAC,IAAI,MAAM1B,KAAK0B,EAAE1B,EAAEkP,QAAQ7N,GAAGjB,KAAKwN,0BAA0BuB,OAAOnP,EAAE,CAACI,KAAKgP,WAAW,EAACjN,EAAAA,EAAAA,KAAG,IAAId,EAAEf,WAAW,IAAIF,KAAKiP,aAAa,aAAa1G,EAAAA,KAAGxG,EAAAA,EAAAA,KAAG,IAAId,EAAEkN,mBAAmB,IAAInO,KAAKiP,aAAa,0BAA0B1G,EAAAA,SAAQuB,OAAOrK,KAAI8B,EAAAA,EAAAA,IAAE9B,IAAI6B,EAAAA,EAAEiG,UAAUvH,MAAMwH,MAAM,0CAADM,OAA2ClI,EAAEwE,GAAE,aAAA0D,OAAY9H,KAAKmE,MAAM+K,IAAG,MAAKzP,GAAGO,KAAKmP,wBAAwBvP,EAAEH,MAAMyK,MAAM,KAAKlK,KAAKuN,qBAAqBvN,KAAKiP,aAAa,YAAYjP,KAAKiP,aAAa,6BAA6BjP,KAAKmP,wBAAwBvP,EAAE,IAAIqB,EAAAA,EAAE,iCAAgC,qCAAA6G,OAAsClI,EAAEwE,QAAS,CAACgL,+BAAAA,CAAgCxP,EAAEH,GAAG,IAAI,MAAMF,KAAKS,KAAKgN,cAAcqC,MAAM,GAAG9P,EAAEe,SAAS8D,KAAKxE,EAAEyE,WAAW,OAAO9E,EAAE6P,gCAAgCxP,EAAEH,GAAG,OAAO,IAAI,CAAC,oCAAM2J,CAA+BxJ,EAAEH,GAAG,GAAG,IAAIG,EAAEiI,OAAO,MAAM,GAAG,MAAMtI,EAA07C,SAAWK,EAAEH,GAAG,MAAMF,EAAE,IAAI6N,IAAInM,EAAErB,EAAEiI,OAAO,IAAI,IAAIxI,EAAE,EAAEA,EAAE4B,EAAE5B,IAAI,CAAC,MAAM4B,EAAErB,EAAEP,GAAGiC,EAAE7B,EAAEwB,EAAE5B,EAAEO,GAAGT,EAAEI,EAAEsP,IAAIvN,GAAGnC,EAAEA,EAAE0K,KAAK5I,GAAG1B,EAAE+P,IAAIhO,EAAE,CAACL,GAAG,CAAC,OAAO1B,CAAC,CAA5jDwM,CAAEnM,GAAGA,GAAGA,EAAEkJ,cAAc7H,EAAE,GAAG,IAAI,MAAMK,EAAEnC,KAAKI,EAAE,CAAC,MAAMK,EAAEI,KAAKuP,eAAejO,GAAG,MAAM1B,GAAGqB,EAAE4I,KAAKjK,EAAEwJ,+BAA+BjK,EAAEM,GAAG,CAAC,MAAMJ,QAAQmK,EAAAA,EAAAA,IAAEvI,GAAG,OAAO/B,EAAAA,EAAAA,IAAEO,GAAGJ,EAAEmQ,MAAM,CAACC,iBAAAA,CAAkB7P,GAAG,MAAMH,EAAEO,KAAKuP,eAAe3P,EAAEkJ,aAAa,OAAO,MAAMrJ,EAAEiQ,QAAQC,SAASlQ,EAAEgQ,kBAAkB7P,EAAE,CAACgQ,4BAAAA,CAA6BhQ,GAAG,IAAI,MAAMH,KAAKO,KAAKgN,cAAcqC,MAAM,GAAG5P,EAAEa,SAAS8D,KAAKxE,EAAEyE,WAAW,OAAO5E,EAAEmQ,6BAA6BhQ,GAAG,OAAO,IAAI,CAAC,sBAAMiQ,CAAiBjQ,GAAG,MAAMH,EAAEO,KAAKuP,eAAe3P,GAAG,GAAG,MAAMH,EAAE,OAAOA,EAAE,MAAMF,EAAES,KAAKmN,uBAAuB0B,IAAIjP,GAAG,GAAG,MAAML,EAAE,MAAMA,EAAE,MAAM0B,EAAEjB,KAAKwN,0BAA0BqB,IAAIjP,GAAGP,GAAEyN,EAAAA,EAAAA,MAAI,OAAO7L,EAAEA,EAAE4I,KAAKxK,GAAGW,KAAKwN,0BAA0B8B,IAAI1P,EAAE,CAACP,IAAIA,EAAEyQ,OAAO,CAACX,uBAAAA,CAAwBvP,EAAEH,GAAGO,KAAKmN,uBAAuBmC,IAAI1P,EAAEH,GAAG,MAAMF,EAAES,KAAKwN,0BAA0BqB,IAAIjP,GAAG,GAAGL,EAAE,CAAC,IAAI,MAAMK,KAAKL,EAAEK,EAAE+P,OAAOlQ,GAAGO,KAAKwN,0BAA0BuB,OAAOnP,EAAE,CAAC,CAAC2P,cAAAA,CAAe3P,GAAG,OAAOI,KAAKgN,cAAcc,MAAMrO,GAAGG,IAAIH,EAAEa,UAAU,CAAC4C,SAAAA,CAAUtD,EAAEH,GAAG,IAAG4L,EAAAA,EAAAA,IAAEzL,GAAG,OAAO8L,EAAAA,GAAE,MAAMnM,GAAEmK,EAAAA,EAAAA,IAAE9J,GAAG,GAAG,IAAIL,EAAEsI,OAAO,OAAO6D,EAAAA,GAAE,IAAGd,EAAAA,EAAAA,IAAErL,EAAE,IAAI,CAAC,MAAMK,EAAEL,EAAE0B,EAAE,IAAImM,IAAI,IAAI,MAAM3N,KAAKG,GAAET,EAAAA,EAAAA,IAAE8B,EAAExB,EAAEqJ,aAAa,IAAI,KAAKe,KAAKpK,GAAG,MAAM6B,EAAE,GAAG,OAAOtB,KAAKgN,cAAc0B,SAAS9O,IAAI,MAAML,EAAE0B,EAAE4N,IAAIjP,EAAEU,UAAUf,GAAG+B,EAAEuI,KAAKjK,EAAEsD,UAAU3D,EAAEE,QAAOJ,EAAAA,EAAAA,IAAEiC,EAAE,CAAC,OAAOoK,EAAAA,EAAC,CAAC,cAAIqE,GAAa,OAAO/P,KAAKgN,cAAcxE,QAAQ,CAAC5I,EAAEH,IAAIG,EAAEH,EAAEsQ,YAAY,EAAE,CAAC,kBAAIC,GAAiB,OAAOhQ,KAAKgN,cAAcxE,QAAQ,CAAC5I,EAAEH,IAAIG,EAAEH,EAAEuQ,gBAAgB,EAAE,CAAC,mBAAIC,GAAkB,OAAO,IAAI1D,EAAAA,EAAEvM,KAAK+P,WAAW,IAAwInQ,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,OAAK4K,GAAE/L,UAAU,qBAAgB,IAAQtB,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,OAAK4K,GAAE/L,UAAU,8BAAyB,IAAQtB,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE,CAAClB,UAAS,KAAM8L,GAAE/L,UAAU,mBAAmB,OAAMtB,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE,CAAClB,UAAS,KAAM8L,GAAE/L,UAAU,oBAAoB,OAAMtB,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE6N,EAAAA,IAAIjD,GAAE/L,UAAU,wBAAmB,IAAQtB,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE,CAAClB,UAAS,EAAGgP,UAAU,MAAMlD,GAAE/L,UAAU,wBAAwB,OAAMtB,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE,CAAClB,UAAS,KAAM8L,GAAE/L,UAAU,wBAAwB,MAAM+L,IAAErN,EAAAA,EAAAA,GAAE,EAACgK,EAAAA,EAAAA,GAAE,kDAAkDqD,IAAG,MAAM7J,GAAE6J,E","sources":["../node_modules/@arcgis/core/views/3d/layers/BuildingSublayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/i3s/BuildingFilterUtil.js","../node_modules/@arcgis/core/views/layers/BuildingComponentSublayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingComponentSublayerView3D.js","../node_modules/@arcgis/core/views/layers/BuildingSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSceneLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Evented.js\";import t from\"../../../core/Identifiable.js\";import i from\"../../../core/Promise.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";const p=(p,n)=>{let l=class extends(i.EsriPromiseMixin(t.IdentifiableMixin(r.EventedMixin(p)))){constructor(e){super(e)}initialize(){}get suspended(){return!this.canResume()}get updating(){return!this.suspended&&this.isUpdating()}get visible(){return!!this.sublayer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get fullOpacity(){const e=e=>null!=e?e:1;return e(this.sublayer?.opacity)*e(this.parent?.fullOpacity)}canResume(){return!this.parent?.suspended&&this.view?.ready&&this.visible||!1}isUpdating(){return!1}};return e([s()],l.prototype,\"sublayer\",void 0),e([s()],l.prototype,\"parent\",void 0),e([s()],l.prototype,\"view\",void 0),e([s({readOnly:!0})],l.prototype,\"suspended\",null),e([s({type:Boolean,readOnly:!0})],l.prototype,\"updating\",null),e([s()],l.prototype,\"visible\",null),e([s()],l.prototype,\"fullOpacity\",null),l=e([o(\"esri.views.3d.layers.BuildingSublayerView3D\")],l),l};export{p as BuildingSublayerView3DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{clone as e}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{createMaterialFromEdges as r}from\"../support/edgeUtils.js\";import{ColorMixModeEnum as o}from\"../support/symbolColorUtils.js\";var a;!function(e){e[e.Solid=0]=\"Solid\",e[e.WireFrame=1]=\"WireFrame\",e[e.XRay=2]=\"XRay\"}(a||(a={}));const l=.15,t=.5*l;function i(e){switch(e.filterMode.type){case\"solid\":return{mode:a.Solid};case\"wire-frame\":return{mode:a.WireFrame,edgeMaterial:r(e.filterMode.edges,{})};case\"x-ray\":return{mode:a.XRay}}}function c(e,r){if(null==r)return e.color[3]=0,void(e.edgeMaterial=null);switch(r.mode){case a.Solid:return;case a.WireFrame:return e.color[3]=0,void(e.edgeMaterial=r.edgeMaterial);case a.XRay:return e.color[0]=1,e.color[1]=1,e.color[2]=1,e.color[3]*=l,e.colorMixMode=o.Replace,e.castShadows=!1,e.pickable=!1,void(e.edgeMaterial=s(e.edgeMaterial))}}function s(e){return null==e?null:(d.lastMaterial!==e&&(d.cachedMaterial=n(e),d.lastMaterial=e),d.cachedMaterial)}function n(r){const o=e(r.color);return o[3]*=t,{...r,color:o}}const d={cachedMaterial:null,lastMaterial:null};export{a as FilterModeEnum,c as applyFilterMode,i as parseFilterMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";class o extends e{constructor(){super(...arguments),this.sublayer=null}get updating(){return!1}get suspended(){return!1}get availableFields(){return[]}get filter(){return null}set filter(r){throw new Error(\"Not implemented\")}queryFeatures(r,e){throw new Error(\"Not implemented\")}queryObjectIds(r,e){throw new Error(\"Not implemented\")}queryFeatureCount(r,e){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(r,e){throw new Error(\"Not implemented\")}highlight(r){throw new Error(\"Not implemented\")}}r([t()],o.prototype,\"sublayer\",void 0),r([t()],o.prototype,\"availableFields\",null),r([t()],o.prototype,\"filter\",null);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{destroyMaybe as s}from\"../../../core/maybe.js\";import{throwIfAborted as l,throwIfAbortError as a}from\"../../../core/promiseUtils.js\";import{syncAndInitial as o,initial as n}from\"../../../core/reactiveUtils.js\";import{property as u}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../core/sql/WhereClause.js\";import\"../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import h from\"../../../layers/support/FeatureFilter.js\";import{fixFields as y,unpackFieldNames as c,populateMissingFields as f}from\"../../../layers/support/fieldUtils.js\";import m from\"../../../rest/support/Query.js\";import{isNumber as g}from\"../../../support/guards.js\";import{BuildingSublayerView3DMixin as F}from\"./BuildingSublayerView3D.js\";import{I3SMeshView3D as b}from\"./I3SMeshView3D.js\";import{ForAllFeaturesMode as _}from\"./II3SMeshView3D.js\";import{applyFilterMode as w}from\"./i3s/BuildingFilterUtil.js\";import{createGetFeatureExtent as E}from\"./i3s/I3SGeometryUtil.js\";import{I3SMeshViewFilter as x}from\"./i3s/I3SMeshViewFilter.js\";import{I3SQueryEngine as S}from\"./i3s/I3SQueryEngine.js\";import{I3SQueryFeatureAdapter as j,I3SQueryFeature as v}from\"./i3s/I3SQueryFeatureAdapter.js\";import{I3SQueryFeatureStore as I}from\"./i3s/I3SQueryFeatureStore.js\";import{findFieldsCaseInsensitive as Q,getIndexCrs as q}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as R}from\"./support/DefinitionExpressionSceneLayerView.js\";import{TemporalSceneLayerView as L}from\"./support/TemporalSceneLayerView.js\";import V from\"../../layers/BuildingComponentSublayerView.js\";import{hasPopupTemplate as U,getRequiredFields as A,getFetchPopupTemplate as C}from\"../../layers/support/popupUtils.js\";import{isInEffectiveScaleRange as H}from\"../../support/layerViewUtils.js\";import{TaskPriority as O}from\"../../support/Scheduler.js\";let D=class extends(L(R(b(F(V))))){constructor(e){super(e),this.type=\"building-component-sublayer-3d\",this._elevationContext=\"scene\",this._supportsLabeling=!1,this.requiredFields=[],this.progressiveLoadFactor=1,this._queryEngine=null}get i3slayer(){return this.sublayer}get layerViewUid(){return this.layerView.uid}get layerId(){return this.sublayer.layer.id}get sublayerId(){return this.sublayer.id}get layerPopupEnabledAndHasTemplate(){return this.sublayer.popupEnabled&&U(this.sublayer,this.layerView.view.popup?.defaultPopupTemplateEnabled)}initialize(){this._updatingHandles.add((()=>this.mergedFilter),(e=>{null!=e&&x.checkSupport(e)?null==this._i3sFilter?this._i3sFilter=new x({viewFilter:e,layerFieldsIndex:this.sublayer.fieldsIndex,loadAsyncModule:e=>this._loadAsyncModule(e),addSqlFilter:(e,r)=>this.addSqlFilter(e,r,this.logError),addTimeFilter:(e,r)=>this.addTimeFilter(e,r)}):this._i3sFilter.viewFilter=e:this._i3sFilter=s(this._i3sFilter)}),o),this._updatingHandles.add((()=>[this.sublayer.renderer,this.definitionExpressionFields,this.filterExpressionFields]),(()=>this._updateRequiredFields())),this._updatingHandles.add((()=>this.sublayer.renderer),(e=>this._rendererChange(e)),n);const e=()=>this._filterChange();this._updatingHandles.add((()=>this.parsedDefinitionExpression),e),this._updatingHandles.add((()=>this._i3sFilter?.sortedObjectIds),e),this._updatingHandles.add((()=>this._i3sFilter?.parsedWhereClause),e),this._updatingHandles.add((()=>this.getTimeFilterDependencies()),e),this._updatingHandles.add((()=>this.mergedFilter),e),this._updatingHandles.add((()=>[this._i3sFilter?.parsedGeometry,this.filter?.spatialRelationship]),(()=>this._geometryFilterChange())),this._updatingHandles.add((()=>this.parsedFilterExpressions),(()=>this._updateSymbologyOverride()),n),this.addResolvingPromise(this._updateRequiredFields())}get lodFactor(){return this.view.qualitySettings.sceneService.object.lodFactor}get parsedFilterExpressions(){return\"Overview\"===this.sublayer.modelName?[]:this.layerView.filterExpressions.map((([e,r])=>{let t;try{t=p.create(e,{fieldsIndex:this.sublayer.fieldsIndex})}catch(a){return i.getLogger(this).error(\"Failed to parse filterExpression: \"+a),null}if(!t.isStandardized)return i.getLogger(this).error(\"filterExpression is using non standard function\"),null;const s=[],l=t.fieldNames;return Q(l,this.sublayer.fieldsIndex,{missingFields:s}),s.length>0?(i.getLogger(this).error(`filterExpression references unknown fields: ${s.join(\", \")}`),null):[t,r]})).filter((e=>null!=e))}get filter(){return this._get(\"filter\")}set filter(e){this._set(\"filter\",x.checkSupport(e)?e:null)}isUpdating(){return super.isUpdating()||(this._i3sFilter?.updating??!1)}_updateSymbologyOverride(){const e=this.parsedFilterExpressions;e.length>0?this._setSymbologyOverride(((r,t)=>{for(const[s,l]of e)try{if(s.testFeature(r))return w(t,l)}catch(i){this.logError(i)}return w(t,null)}),this.filterExpressionFields):this._setSymbologyOverride(null,null)}get filterExpressionFields(){return y(this.sublayer.fieldsIndex,this.parsedFilterExpressions.reduce(((e,[r])=>e.concat(r.fieldNames)),new Array))}get availableFields(){const e=this.sublayer,r=e.fieldsIndex;let t=this.requiredFields;if(e.outFields||e.layer.outFields){const i=[...e.outFields||[],...e.layer.outFields||[]];t=[...c(r,i),...t]}return y(r,t)}_createLayerGraphic(e){return new r({attributes:e,layer:this.sublayer.layer,sourceLayer:this.sublayer})}canResume(){return super.canResume()&&H(this.i3slayer.effectiveScaleRange,this.view.scale)&&(!this._controller||this._controller.rootNodeVisible)}async fetchPopupFeaturesFromGraphics(e,r){const t=this._validateFetchPopupFeatures(r);if(t)throw t;if(0===e.length)return[];const s=[],o=[],n=null!=this.sublayer.associatedLayer?await this.sublayer.associatedLayer.load(r):this.sublayer,u=c(this.sublayer.fieldsIndex,await A(n,C(this.sublayer,r)));l(r);const d=new Set;for(const i of e)f(i,u,d)?o.push(i):s.push(i);return 0===o.length?s:(null!=this.sublayer.associatedLayer&&await this.sublayer.associatedLayer.load().catch((()=>i.getLogger(this).warn(\"Failed to load associated feature layer. Displaying popup attributes from cached attributes.\"))),this.whenGraphicAttributes(o,Array.from(d)).catch((e=>(a(e),o))).then((e=>s.concat(e))))}async _updateRequiredFields(){const e=y(this.sublayer.fieldsIndex,[...this.sublayer.renderer?await this.sublayer.renderer.getRequiredFields(this.sublayer.fieldsIndex):[],...this.definitionExpressionFields,...this.filterExpressionFields]);this._set(\"requiredFields\",e)}_validateFetchPopupFeatures(e){const{sublayer:r}=this,{popupEnabled:i}=r;return i?C(r,e)?void 0:new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{sublayer:r}):new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{sublayer:r})}getFilters(){const e=super.getFilters();return this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),this._i3sFilter?.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}createQuery(){const e={outFields:[\"*\"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new m(e)}queryExtent(e,r){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),r?.signal)}queryFeatureCount(e,r){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),r?.signal)}queryFeatures(e,r){return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),r?.signal).then((e=>{if(!e?.features)return e;const r=this.sublayer,t=r.layer;for(const i of e.features)i.layer=t,i.sourceLayer=r;return e}))}async queryObjectIds(e,r){return(await this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),r?.signal)).filter(g)}_ensureQueryEngine(){return this._queryEngine??=this._createQueryEngine(),this._queryEngine}_createQueryEngine(){const e=E(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new S({layerView:this,priority:O.FEATURE_QUERY_ENGINE,spatialIndex:new I({featureAdapter:new j({objectIdField:this.sublayer.objectIdField,attributeStorageInfo:this.sublayer.attributeStorageInfo,getFeatureExtent:e}),forAllFeatures:(e,r)=>this._forAllFeatures(((r,t,i)=>e(new v(r,t,i))),r,_.QUERYABLE),getFeatureExtent:e,sourceSpatialReference:q(this.sublayer),viewSpatialReference:this.view.spatialReference})})}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():m.from(e))}};e([u()],D.prototype,\"i3slayer\",null),e([u()],D.prototype,\"layerView\",void 0),e([u()],D.prototype,\"lodFactor\",null),e([u({readOnly:!0})],D.prototype,\"parsedFilterExpressions\",null),e([u({type:h})],D.prototype,\"filter\",null),e([u()],D.prototype,\"_i3sFilter\",void 0),e([u({type:[String],readOnly:!0})],D.prototype,\"filterExpressionFields\",null),e([u({type:[String],readOnly:!0})],D.prototype,\"requiredFields\",void 0),e([u({type:[String],readOnly:!0})],D.prototype,\"availableFields\",null),D=e([d(\"esri.views.3d.layers.BuildingComponentSublayerView3D\")],D);export{D as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";import e from\"./LayerView.js\";class s extends e{constructor(r){super(r),this.layer=null,this.sublayerViews=null}highlight(r){throw new Error(\"Not implemented\")}}r([o()],s.prototype,\"layer\",void 0),r([o()],s.prototype,\"sublayerViews\",void 0);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Accessor.js\";import t from\"../../../core/Collection.js\";import s from\"../../../core/Error.js\";import{handlesGroup as i}from\"../../../core/handleUtils.js\";import o from\"../../../core/Logger.js\";import{getOrCreateMapValue as n}from\"../../../core/MapUtils.js\";import{abortMaybe as l}from\"../../../core/maybe.js\";import{isAbortError as a,allSettledValues as u,throwIfAborted as p,createResolver as h}from\"../../../core/promiseUtils.js\";import{watch as c,syncAndInitial as y}from\"../../../core/reactiveUtils.js\";import{property as d}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as f}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../layers/buildingSublayers/BuildingGroupSublayer.js\";import{isQuery as g,isGraphic as m}from\"../../../support/guards.js\";import w from\"./BuildingComponentSublayerView3D.js\";import{BuildingSublayerView3DMixin as b}from\"./BuildingSublayerView3D.js\";import{LayerView3D as V}from\"./LayerView3D.js\";import{parseFilterMode as j}from\"./i3s/BuildingFilterUtil.js\";import{checkSpatialReference as _}from\"./i3s/I3SUtil.js\";import{emptyHighlightHandle as S,normalizeHighlightTargetExceptQuery as C}from\"./support/highlightUtils.js\";import{LayerViewPerformanceInfo as v}from\"./support/LayerViewPerformanceInfo.js\";import{updatingProgress as B}from\"../support/updatingProperties.js\";import M from\"../../layers/BuildingSceneLayerView.js\";import{isInEffectiveScaleRange as E}from\"../../support/layerViewUtils.js\";const F=b(r);let P=class extends(V(M)){constructor(e){super(e),this.type=\"building-scene-3d\",this.sublayerViews=new t,this._rejectedSublayerViews=new Map,this._abortController=new AbortController,this._loadingComponents=0,this._pendingWhenSublayerViews=new Map,this.ignoresMemoryFactor=!1}get filterExpression(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null,t=null!=r?r.filterBlocks?.find((e=>\"solid\"===e.filterMode.type)):null;return t?t.filterExpression:null}get filterExpressions(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null;return r?.filterBlocks?r.filterBlocks.toArray().map((e=>[e.filterExpression??\"\",j(e)])):[]}get updatingProgressValue(){const e=this.sublayerViews,r=this._loadingComponents+(e?e.length:0);return e.reduce(((e,r)=>e+r.updatingProgress),0)/r}get visibleAtCurrentScale(){return E(this.layer.effectiveScaleRange,this.view.scale)}isUpdating(){return this._loadingComponents>0||this.sublayerViews&&this.sublayerViews.some((e=>e.updating))}initialize(){_(this.layer.spatialReference,this.view.spatialReference,this.view.viewingMode),this._initializeSublayerViews(this.layer.sublayers,this)}destroy(){this.sublayerViews&&(this.sublayerViews.forEach((e=>e.destroy())),this.sublayerViews=null),this._rejectedSublayerViews=null,this._abortController=l(this._abortController)}_initializeSublayerViews(e,r){const t=this,i=this.view;e.forEach((e=>{if(!e.isEmpty)if(\"building-group\"===e.type){const t=new F({sublayer:e,view:i,parent:r});this._initializeSublayerViews(e.sublayers,t)}else\"mesh\"===e.geometryType?(this._loadingComponents++,e.load({signal:this._abortController.signal}).then((()=>{const s=new w({sublayer:e,layerView:t,view:i,parent:r});this.sublayerViews.push(s);const o=this._pendingWhenSublayerViews.get(e);if(o){for(const e of o)e.resolve(s);this._pendingWhenSublayerViews.delete(e)}this.addHandles([c((()=>s.updating),(()=>this.notifyChange(\"updating\")),y),c((()=>s.updatingProgress),(()=>this.notifyChange(\"updatingProgressValue\")),y)])})).catch((r=>{a(r)||o.getLogger(this).error(`Error while creating view for sublayer ${e.id}\\nLayer: ${this.layer.url}\\n`,r),this._rejectWhenSublayerView(e,r)})).then((()=>{this._loadingComponents--,this.notifyChange(\"updating\"),this.notifyChange(\"updatingProgressValue\")}))):this._rejectWhenSublayerView(e,new s(\"view:no-layerview-for-sublayer\",`No layerview created for sublayer ${e.id}`))}))}getGraphicFromIntersectorTarget(e,r){for(const t of this.sublayerViews.items)if(t.sublayer.id===e.sublayerId)return t.getGraphicFromIntersectorTarget(e,r);return null}async fetchPopupFeaturesFromGraphics(e,r){if(0===e.length)return[];const t=I(e,(e=>e.sourceLayer)),s=[];for(const[o,n]of t){const e=this._findComponent(o);null!=e&&s.push(e.fetchPopupFeaturesFromGraphics(n,r))}const i=await u(s);return p(r),i.flat()}whenGraphicBounds(e){const r=this._findComponent(e.sourceLayer);return null==r?Promise.reject():r.whenGraphicBounds(e)}getAABBFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.id===e.sublayerId)return r.getAABBFromIntersectorTarget(e);return null}async whenSublayerView(e){const r=this._findComponent(e);if(null!=r)return r;const t=this._rejectedSublayerViews.get(e);if(null!=t)throw t;const s=this._pendingWhenSublayerViews.get(e),i=h();return s?s.push(i):this._pendingWhenSublayerViews.set(e,[i]),i.promise}_rejectWhenSublayerView(e,r){this._rejectedSublayerViews.set(e,r);const t=this._pendingWhenSublayerViews.get(e);if(t){for(const e of t)e.reject(r);this._pendingWhenSublayerViews.delete(e)}}_findComponent(e){return this.sublayerViews.find((r=>e===r.sublayer))}highlight(e,r){if(g(e))return S;const t=C(e);if(0===t.length)return S;if(m(t[0])){const e=t,s=new Map;for(const r of e)n(s,r.sourceLayer,(()=>[])).push(r);const o=[];return this.sublayerViews.forEach((e=>{const t=s.get(e.sublayer);t&&o.push(e.highlight(t,r))})),i(o)}return S}get usedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.usedMemory),0)}get unloadedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.unloadedMemory),0)}get performanceInfo(){return new v(this.usedMemory)}};function I(e,r){const t=new Map,s=e.length;for(let i=0;i<s;i++){const s=e[i],o=r(s,i,e),n=t.get(o);n?n.push(s):t.set(o,[s])}return t}e([d()],P.prototype,\"sublayerViews\",void 0),e([d()],P.prototype,\"_rejectedSublayerViews\",void 0),e([d({readOnly:!0})],P.prototype,\"filterExpression\",null),e([d({readOnly:!0})],P.prototype,\"filterExpressions\",null),e([d(B)],P.prototype,\"updatingProgress\",void 0),e([d({readOnly:!0,dependsOn:[]})],P.prototype,\"updatingProgressValue\",null),e([d({readOnly:!0})],P.prototype,\"visibleAtCurrentScale\",null),P=e([f(\"esri.views.3d.layers.BuildingSceneLayerView3D\")],P);const L=P;export{L as default};\n"],"names":["p","n","l","i","EsriPromiseMixin","t","IdentifiableMixin","r","EventedMixin","constructor","e","super","initialize","suspended","this","canResume","updating","isUpdating","visible","_this$sublayer","sublayer","_overrideIfSome","fullOpacity","_this$sublayer2","_this$parent","opacity","parent","_this$parent2","_this$view","view","ready","s","prototype","readOnly","type","Boolean","o","a","Solid","WireFrame","XRay","filterMode","mode","edgeMaterial","edges","c","color","colorMixMode","Replace","castShadows","pickable","d","lastMaterial","cachedMaterial","_objectSpread","arguments","availableFields","filter","Error","queryFeatures","queryObjectIds","queryFeatureCount","createQuery","queryExtent","highlight","D","L","R","b","F","V","_elevationContext","_supportsLabeling","requiredFields","progressiveLoadFactor","_queryEngine","i3slayer","layerViewUid","layerView","uid","layerId","layer","id","sublayerId","layerPopupEnabledAndHasTemplate","_this$layerView$view$","popupEnabled","U","popup","defaultPopupTemplateEnabled","_updatingHandles","add","mergedFilter","x","checkSupport","_i3sFilter","viewFilter","layerFieldsIndex","fieldsIndex","loadAsyncModule","_loadAsyncModule","addSqlFilter","logError","addTimeFilter","renderer","definitionExpressionFields","filterExpressionFields","_updateRequiredFields","_rendererChange","_filterChange","parsedDefinitionExpression","_this$_i3sFilter","sortedObjectIds","_this$_i3sFilter2","parsedWhereClause","getTimeFilterDependencies","_this$_i3sFilter3","_this$filter","parsedGeometry","spatialRelationship","_geometryFilterChange","parsedFilterExpressions","_updateSymbologyOverride","addResolvingPromise","lodFactor","qualitySettings","sceneService","object","modelName","filterExpressions","map","_ref","create","getLogger","error","isStandardized","fieldNames","Q","missingFields","length","concat","join","_get","_set","_this$_i3sFilter$upda","_this$_i3sFilter4","_setSymbologyOverride","testFeature","w","y","reduce","_ref2","Array","outFields","_createLayerGraphic","attributes","sourceLayer","H","effectiveScaleRange","scale","_controller","rootNodeVisible","fetchPopupFeaturesFromGraphics","_validateFetchPopupFeatures","associatedLayer","load","u","A","C","Set","f","push","catch","warn","whenGraphicAttributes","from","then","getRequiredFields","getFilters","_this$_i3sFilter5","addFilters","crsIndex","_collection","returnGeometry","outSpatialReference","spatialReference","m","_ensureQueryEngine","executeQueryForExtent","_ensureQuery","signal","executeQueryForCount","executeQuery","features","executeQueryForIds","g","_this$_queryEngine","_createQueryEngine","E","renderSpatialReference","S","priority","O","FEATURE_QUERY_ENGINE","spatialIndex","I","featureAdapter","j","objectIdField","attributeStorageInfo","getFeatureExtent","forAllFeatures","_forAllFeatures","v","_","QUERYABLE","sourceSpatialReference","q","viewSpatialReference","_addDefinitionExpressionToQuery","h","String","sublayerViews","P","M","_rejectedSublayerViews","Map","_abortController","AbortController","_loadingComponents","_pendingWhenSublayerViews","ignoresMemoryFactor","filterExpression","_r$filterBlocks","activeFilterId","filters","find","filterBlocks","toArray","_e$filterExpression","updatingProgressValue","updatingProgress","visibleAtCurrentScale","some","viewingMode","_initializeSublayerViews","sublayers","destroy","forEach","isEmpty","geometryType","get","resolve","delete","addHandles","notifyChange","url","_rejectWhenSublayerView","getGraphicFromIntersectorTarget","items","set","_findComponent","flat","whenGraphicBounds","Promise","reject","getAABBFromIntersectorTarget","whenSublayerView","promise","usedMemory","unloadedMemory","performanceInfo","B","dependsOn"],"sourceRoot":""}