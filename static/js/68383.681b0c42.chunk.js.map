{"version":3,"file":"static/js/68383.681b0c42.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/BuildingSublayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/i3s/BuildingFilterUtil.js","../node_modules/@arcgis/core/views/layers/BuildingComponentSublayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingComponentSublayerView3D.js","../node_modules/@arcgis/core/views/layers/BuildingSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSceneLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{EventedMixin as r}from\"../../../core/Evented.js\";import{IdentifiableMixin as t}from\"../../../core/Identifiable.js\";import{EsriPromiseMixin as o}from\"../../../core/Promise.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";const p=(p,n)=>{const l=o(t(r(p)));let u=class extends l{constructor(e){super(e)}initialize(){}get suspended(){return!this.canResume()}get updating(){return!this.suspended&&this.isUpdating()}get visible(){return!!this.sublayer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get fullOpacity(){const e=e=>null!=e?e:1;return e(this.sublayer?.opacity)*e(this.parent?.fullOpacity)}canResume(){return!this.parent?.suspended&&this.view?.ready&&this.visible||!1}isUpdating(){return!1}};return e([s()],u.prototype,\"sublayer\",void 0),e([s()],u.prototype,\"parent\",void 0),e([s()],u.prototype,\"view\",void 0),e([s({readOnly:!0})],u.prototype,\"suspended\",null),e([s({type:Boolean,readOnly:!0})],u.prototype,\"updating\",null),e([s()],u.prototype,\"visible\",null),e([s()],u.prototype,\"fullOpacity\",null),u=e([i(\"esri.views.3d.layers.BuildingSublayerView3D\")],u),u};export{p as BuildingSublayerView3DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{clone as e}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{createMaterialFromEdges as r}from\"../support/edgeUtils.js\";const o=.15,t=.5*o;function a(e){switch(e.filterMode.type){case\"solid\":return{mode:0};case\"wire-frame\":return{mode:1,edgeMaterial:r(e.filterMode.edges,{})};case\"x-ray\":return{mode:2}}}function l(e,r){if(null==r)return e.color[3]=0,void(e.edgeMaterial=null);switch(r.mode){case 0:return;case 1:return e.color[3]=0,void(e.edgeMaterial=r.edgeMaterial);case 2:return e.color[0]=1,e.color[1]=1,e.color[2]=1,e.color[3]*=o,e.colorMixMode=3,e.castShadows=!1,e.pickable=!1,void(e.edgeMaterial=c(e.edgeMaterial))}}function c(e){return null==e?null:(n.lastMaterial!==e&&(n.cachedMaterial=i(e),n.lastMaterial=e),n.cachedMaterial)}function i(r){const o=e(r.color);return o[3]*=t,{...r,color:o}}const n={cachedMaterial:null,lastMaterial:null};export{l as applyFilterMode,a as parseFilterMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as r}from\"tslib\";import e from\"../../core/Accessor.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";class o extends e{constructor(){super(...arguments),this.sublayer=null}get updating(){return!1}get suspended(){return!1}get availableFields(){return[]}get filter(){return null}set filter(r){throw new Error(\"Not implemented\")}queryFeatures(r,e){throw new Error(\"Not implemented\")}queryObjectIds(r,e){throw new Error(\"Not implemented\")}queryFeatureCount(r,e){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(r,e){throw new Error(\"Not implemented\")}highlight(r){throw new Error(\"Not implemented\")}}r([t()],o.prototype,\"sublayer\",void 0),r([t()],o.prototype,\"availableFields\",null),r([t()],o.prototype,\"filter\",null);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import r from\"../../../Graphic.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{destroyMaybe as s}from\"../../../core/maybe.js\";import{throwIfAborted as l,throwIfAbortError as a}from\"../../../core/promiseUtils.js\";import{syncAndInitial as o,initial as n}from\"../../../core/reactiveUtils.js\";import{property as u}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../core/sql/WhereClause.js\";import\"../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import h from\"../../../layers/support/FeatureFilter.js\";import{fixFields as y,unpackFieldNames as c,populateMissingFields as g}from\"../../../layers/support/fieldUtils.js\";import f from\"../../../rest/support/Query.js\";import{isNumber as m}from\"../../../support/guards.js\";import{BuildingSublayerView3DMixin as F}from\"./BuildingSublayerView3D.js\";import{I3SMeshView3D as b}from\"./I3SMeshView3D.js\";import{applyFilterMode as _}from\"./i3s/BuildingFilterUtil.js\";import{createGetFeatureExtent as w}from\"./i3s/I3SGeometryUtil.js\";import{I3SMeshViewFilter as E}from\"./i3s/I3SMeshViewFilter.js\";import{I3SQueryEngine as x}from\"./i3s/I3SQueryEngine.js\";import{I3SQueryFeatureAdapter as S,I3SQueryFeature as j}from\"./i3s/I3SQueryFeatureAdapter.js\";import{I3SQueryFeatureStore as v}from\"./i3s/I3SQueryFeatureStore.js\";import{findFieldsCaseInsensitive as I,getIndexCrs as Q}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as q}from\"./support/DefinitionExpressionSceneLayerView.js\";import{TemporalSceneLayerView as R}from\"./support/TemporalSceneLayerView.js\";import L from\"../../layers/BuildingComponentSublayerView.js\";import{hasPopupTemplate as O,getRequiredFields as V,getFetchPopupTemplate as U}from\"../../layers/support/popupUtils.js\";import{isInEffectiveScaleRange as C}from\"../../support/layerViewUtils.js\";import{TaskPriority as A}from\"../../support/Scheduler.js\";let H=class extends(R(q(b(F(L))))){constructor(e){super(e),this.type=\"building-component-sublayer-3d\",this._elevationContext=2,this._supportsLabeling=!1,this.requiredFields=[],this.progressiveLoadFactor=1,this._queryEngine=null}get i3slayer(){return this.sublayer}get layerViewUid(){return this.layerView.uid}get layerId(){return this.sublayer.layer.id}get sublayerId(){return this.sublayer.id}get layerPopupEnabledAndHasTemplate(){return this.sublayer.popupEnabled&&O(this.sublayer,this.layerView.view.popup?.defaultPopupTemplateEnabled)}initialize(){this._updatingHandles.add(()=>this.mergedFilter,e=>{null!=e&&E.checkSupport(e)?null==this._i3sFilter?this._i3sFilter=new E({viewFilter:e,layerFieldsIndex:this.sublayer.fieldsIndex,loadAsyncModule:e=>this._loadAsyncModule(e),addSqlFilter:(e,r)=>this.addSqlFilter(e,r,this.logError),addTimeFilter:(e,r)=>this.addTimeFilter(e,r)}):this._i3sFilter.viewFilter=e:this._i3sFilter=s(this._i3sFilter)},o),this._updatingHandles.add(()=>[this.sublayer.renderer,this.definitionExpressionFields,this.filterExpressionFields],()=>this._updateRequiredFields()),this._updatingHandles.add(()=>this.sublayer.renderer,e=>this._rendererChange(e),n);const e=()=>this._filterChange();this._updatingHandles.add(()=>this.parsedDefinitionExpression,e),this._updatingHandles.add(()=>this._i3sFilter?.sortedObjectIds,e),this._updatingHandles.add(()=>this._i3sFilter?.parsedWhereClause,e),this._updatingHandles.add(()=>this.getTimeFilterDependencies(),e),this._updatingHandles.add(()=>this.mergedFilter,e),this._updatingHandles.add(()=>[this._i3sFilter?.parsedGeometry,this.filter?.spatialRelationship],()=>this._geometryFilterChange()),this._updatingHandles.add(()=>this.parsedFilterExpressions,()=>this._updateSymbologyOverride(),n),this.addResolvingPromise(this._updateRequiredFields())}get lodFactor(){return this.view.qualitySettings.sceneService.object.lodFactor}get parsedFilterExpressions(){return\"Overview\"===this.sublayer.modelName?[]:this.layerView.filterExpressions.map(([e,r])=>{let t;try{t=p.create(e,{fieldsIndex:this.sublayer.fieldsIndex})}catch(a){return i.getLogger(this).error(\"Failed to parse filterExpression: \"+a),null}if(!t.isStandardized)return i.getLogger(this).error(\"filterExpression is using non standard function\"),null;const s=[],l=t.fieldNames;return I(l,this.sublayer.fieldsIndex,{missingFields:s}),s.length>0?(i.getLogger(this).error(`filterExpression references unknown fields: ${s.join(\", \")}`),null):[t,r]}).filter(e=>null!=e)}get filter(){return this._get(\"filter\")}set filter(e){this._set(\"filter\",E.checkSupport(e)?e:null)}isUpdating(){return super.isUpdating()||(this._i3sFilter?.updating??!1)}_updateSymbologyOverride(){const e=this.parsedFilterExpressions;e.length>0?this._setSymbologyOverride((r,t)=>{for(const[s,l]of e)try{if(s.testFeature(r))return _(t,l)}catch(i){this.logError(i)}return _(t,null)},this.filterExpressionFields):this._setSymbologyOverride(null,null)}get filterExpressionFields(){return y(this.sublayer.fieldsIndex,this.parsedFilterExpressions.reduce((e,[r])=>e.concat(r.fieldNames),new Array))}get availableFields(){const e=this.sublayer,r=e.fieldsIndex;let t=this.requiredFields;if(e.outFields||e.layer.outFields){const i=[...e.outFields||[],...e.layer.outFields||[]];t=[...c(r,i),...t]}return y(r,t)}get _graphicOrigin(){return this.sublayer.graphicOrigin}_createLayerGraphic(e){return new r({attributes:e,layer:this.sublayer.layer,sourceLayer:this.sublayer,origin:this._graphicOrigin})}canResume(){return super.canResume()&&C(this.i3slayer.effectiveScaleRange,this.view.scale)&&(!this._controller||this._controller.rootNodeVisible)}async fetchPopupFeaturesFromGraphics(e,r){const t=this._validateFetchPopupFeatures(r);if(t)throw t;if(0===e.length)return[];const s=[],o=[],n=null!=this.sublayer.associatedLayer?await this.sublayer.associatedLayer.load(r):this.sublayer,u=c(this.sublayer.fieldsIndex,await V(n,U(this.sublayer,r)));l(r);const d=new Set;for(const i of e)g(i,u,d)?o.push(i):s.push(i);return 0===o.length?s:(null!=this.sublayer.associatedLayer&&await this.sublayer.associatedLayer.load().catch(()=>i.getLogger(this).warn(\"Failed to load associated feature layer. Displaying popup attributes from cached attributes.\")),this.whenGraphicAttributes(o,Array.from(d)).catch(e=>(a(e),o)).then(e=>s.concat(e)))}async _updateRequiredFields(){const e=y(this.sublayer.fieldsIndex,[...this.sublayer.renderer?await this.sublayer.renderer.getRequiredFields(this.sublayer.fieldsIndex):[],...this.definitionExpressionFields,...this.filterExpressionFields]);this._set(\"requiredFields\",e)}_validateFetchPopupFeatures(e){const{sublayer:r}=this,{popupEnabled:i}=r;return i?U(r,e)?void 0:new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{sublayer:r}):new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{sublayer:r})}getFilters(){const e=super.getFilters();return this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),this._i3sFilter?.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}createQuery(){const e={outFields:[\"*\"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new f(e)}queryExtent(e,r){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),r?.signal)}queryFeatureCount(e,r){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),r?.signal)}queryFeatures(e,r){return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),r?.signal).then(e=>{if(!e?.features)return e;const r=this.sublayer,t=r.layer,i=this._graphicOrigin;for(const s of e.features)s.layer=t,s.sourceLayer=r,s.origin=i;return e})}async queryObjectIds(e,r){return(await this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),r?.signal)).filter(m)}_ensureQueryEngine(){return this._queryEngine??=this._createQueryEngine(),this._queryEngine}_createQueryEngine(){const e=w(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new x({layerView:this,priority:A.FEATURE_QUERY_ENGINE,spatialIndex:new v({featureAdapter:new S({objectIdField:this.sublayer.objectIdField,attributeStorageInfo:this.sublayer.attributeStorageInfo,getFeatureExtent:e}),forAllFeatures:(e,r)=>this._forAllFeatures((r,t,i)=>e(new j(r,t,i)),r,2),getFeatureExtent:e,sourceSpatialReference:Q(this.sublayer),viewSpatialReference:this.view.spatialReference})})}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():f.from(e))}};e([u()],H.prototype,\"i3slayer\",null),e([u()],H.prototype,\"layerView\",void 0),e([u()],H.prototype,\"lodFactor\",null),e([u({readOnly:!0})],H.prototype,\"parsedFilterExpressions\",null),e([u({type:h})],H.prototype,\"filter\",null),e([u()],H.prototype,\"_i3sFilter\",void 0),e([u({type:[String],readOnly:!0})],H.prototype,\"filterExpressionFields\",null),e([u({type:[String],readOnly:!0})],H.prototype,\"requiredFields\",void 0),e([u({type:[String],readOnly:!0})],H.prototype,\"availableFields\",null),e([u()],H.prototype,\"_graphicOrigin\",null),H=e([d(\"esri.views.3d.layers.BuildingComponentSublayerView3D\")],H);export{H as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as r}from\"tslib\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";import e from\"./LayerView.js\";class t extends e{constructor(r){super(r),this.layer=null,this.sublayerViews=null}highlight(r,o){throw new Error(\"Not implemented\")}}r([o()],t.prototype,\"layer\",void 0),r([o()],t.prototype,\"sublayerViews\",void 0);export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import r from\"../../../core/Accessor.js\";import i from\"../../../core/Collection.js\";import t from\"../../../core/Error.js\";import{handlesGroup as s}from\"../../../core/handleUtils.js\";import o from\"../../../core/Logger.js\";import{getOrCreateMapValue as n}from\"../../../core/MapUtils.js\";import{abortMaybe as l}from\"../../../core/maybe.js\";import{isAbortError as a,allSettledValues as u,throwIfAborted as p,createResolver as h}from\"../../../core/promiseUtils.js\";import{watch as c,syncAndInitial as y}from\"../../../core/reactiveUtils.js\";import{property as d}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as g}from\"../../../core/accessorSupport/decorators/subclass.js\";import{isBuildingGraphicOrigin as f}from\"../../../graphic/isBuildingGraphicOrigin.js\";import\"../../../layers/buildingSublayers/BuildingGroupSublayer.js\";import{isGraphic as m}from\"../../../support/guards.js\";import w from\"./BuildingComponentSublayerView3D.js\";import{BuildingSublayerView3DMixin as b}from\"./BuildingSublayerView3D.js\";import{LayerView3D as V}from\"./LayerView3D.js\";import{parseFilterMode as j}from\"./i3s/BuildingFilterUtil.js\";import{checkSpatialReference as S}from\"./i3s/I3SUtil.js\";import{normalizeHighlightTarget as _,emptyHighlightHandle as C}from\"./support/highlightUtils.js\";import{LayerViewPerformanceInfo as v}from\"./support/LayerViewPerformanceInfo.js\";import{updatingProgress as B}from\"../support/updatingProperties.js\";import M from\"../../layers/BuildingSceneLayerView.js\";import{isInEffectiveScaleRange as E}from\"../../support/layerViewUtils.js\";const F=b(r);let P=class extends(V(M)){constructor(e){super(e),this.type=\"building-scene-3d\",this.sublayerViews=new i,this._rejectedSublayerViews=new Map,this._abortController=new AbortController,this._loadingComponents=0,this._pendingWhenSublayerViews=new Map,this.ignoresMemoryFactor=!1}get filterExpression(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find(r=>r.id===e):null,i=null!=r?r.filterBlocks?.find(e=>\"solid\"===e.filterMode.type):null;return i?i.filterExpression:null}get filterExpressions(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find(r=>r.id===e):null;return r?.filterBlocks?r.filterBlocks.toArray().map(e=>[e.filterExpression??\"\",j(e)]):[]}get updatingProgressValue(){const e=this.sublayerViews,r=this._loadingComponents+(e?e.length:0);return e.reduce((e,r)=>e+r.updatingProgress,0)/r}get visibleAtCurrentScale(){return E(this.layer.effectiveScaleRange,this.view.scale)}isUpdating(){return this._loadingComponents>0||this.sublayerViews&&this.sublayerViews.some(e=>e.updating)}initialize(){S(this.layer.spatialReference,this.view.spatialReference,this.view.viewingMode),this._initializeSublayerViews(this.layer.sublayers,this)}destroy(){this.sublayerViews&&(this.sublayerViews.forEach(e=>e.destroy()),this.sublayerViews=null),this._rejectedSublayerViews=null,this._abortController=l(this._abortController)}_initializeSublayerViews(e,r){const i=this,s=this.view;e.forEach(e=>{if(!e.isEmpty)if(\"building-group\"===e.type){const i=new F({sublayer:e,view:s,parent:r});this._initializeSublayerViews(e.sublayers,i)}else\"mesh\"===e.geometryType?(this._loadingComponents++,e.load({signal:this._abortController.signal}).then(()=>{const t=new w({sublayer:e,layerView:i,view:s,parent:r});this.sublayerViews.push(t);const o=this._pendingWhenSublayerViews.get(e);if(o){for(const e of o)e.resolve(t);this._pendingWhenSublayerViews.delete(e)}this.addHandles([c(()=>t.updating,()=>this.notifyChange(\"updating\"),y),c(()=>t.updatingProgress,()=>this.notifyChange(\"updatingProgressValue\"),y)])}).catch(r=>{a(r)||o.getLogger(this).error(`Error while creating view for sublayer ${e.id}\\nLayer: ${this.layer.url}\\n`,r),this._rejectWhenSublayerView(e,r)}).then(()=>{this._loadingComponents--,this.notifyChange(\"updating\"),this.notifyChange(\"updatingProgressValue\")})):this._rejectWhenSublayerView(e,new t(\"view:no-layerview-for-sublayer\",`No layerview created for sublayer ${e.id}`))})}getGraphicFromIntersectorTarget(e,r){for(const i of this.sublayerViews.items)if(i.sublayer.id===e.sublayerId)return i.getGraphicFromIntersectorTarget(e,r);return null}async fetchPopupFeaturesFromGraphics(e,r){if(0===e.length)return[];const i=I(e,e=>f(e.origin)?e.origin.sublayer:e.sourceLayer),t=[];for(const[o,n]of i){const e=this._findComponent(o);null!=e&&t.push(e.fetchPopupFeaturesFromGraphics(n,r))}const s=await u(t);return p(r),s.flat()}whenGraphicBounds(e){const r=this._findComponent(f(e.origin)?e.origin.sublayer:e.sourceLayer);return null==r?Promise.reject():r.whenGraphicBounds(e)}getAABBFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.id===e.sublayerId)return r.getAABBFromIntersectorTarget(e);return null}async whenSublayerView(e){const r=this._findComponent(e);if(null!=r)return r;const i=this._rejectedSublayerViews.get(e);if(null!=i)throw i;const t=this._pendingWhenSublayerViews.get(e),s=h();return t?t.push(s):this._pendingWhenSublayerViews.set(e,[s]),s.promise}_rejectWhenSublayerView(e,r){this._rejectedSublayerViews.set(e,r);const i=this._pendingWhenSublayerViews.get(e);if(i){for(const e of i)e.reject(r);this._pendingWhenSublayerViews.delete(e)}}_findComponent(e){return this.sublayerViews.find(r=>e===r.sublayer)}highlight(e,r){const i=_(e);if(0===i.length)return C;if(m(i[0])){const e=i,t=new Map;for(const r of e)n(t,f(r.origin)?r.origin.sublayer:r.sourceLayer,()=>[]).push(r);const o=[];return this.sublayerViews.forEach(e=>{const i=t.get(e.sublayer);i&&o.push(e.highlight(i,r))}),s(o)}return C}get usedMemory(){return this.sublayerViews.reduce((e,r)=>e+r.usedMemory,0)}get unloadedMemory(){return this.sublayerViews.reduce((e,r)=>e+r.unloadedMemory,0)}get performanceInfo(){return new v(this.usedMemory)}};function I(e,r){const i=new Map,t=e.length;for(let s=0;s<t;s++){const t=e[s],o=r(t,s,e),n=i.get(o);n?n.push(t):i.set(o,[t])}return i}e([d()],P.prototype,\"sublayerViews\",void 0),e([d()],P.prototype,\"_rejectedSublayerViews\",void 0),e([d({readOnly:!0})],P.prototype,\"filterExpression\",null),e([d({readOnly:!0})],P.prototype,\"filterExpressions\",null),e([d(B)],P.prototype,\"updatingProgress\",void 0),e([d({readOnly:!0,dependsOn:[]})],P.prototype,\"updatingProgressValue\",null),e([d({readOnly:!0})],P.prototype,\"visibleAtCurrentScale\",null),P=e([g(\"esri.views.3d.layers.BuildingSceneLayerView3D\")],P);const L=P;export{L as default};\n"],"names":["p","n","l","o","t","r","u","constructor","e","super","initialize","suspended","this","canResume","updating","isUpdating","visible","_this$sublayer","sublayer","_overrideIfSome","fullOpacity","_this$sublayer2","_this$parent","opacity","parent","_this$parent2","_this$view","view","ready","s","prototype","readOnly","type","Boolean","i","a","filterMode","mode","edgeMaterial","edges","color","colorMixMode","castShadows","pickable","lastMaterial","cachedMaterial","_objectSpread","c","arguments","availableFields","filter","Error","queryFeatures","queryObjectIds","queryFeatureCount","createQuery","queryExtent","highlight","H","R","q","b","F","L","_elevationContext","_supportsLabeling","requiredFields","progressiveLoadFactor","_queryEngine","i3slayer","layerViewUid","layerView","uid","layerId","layer","id","sublayerId","layerPopupEnabledAndHasTemplate","_this$layerView$view$","popupEnabled","O","popup","defaultPopupTemplateEnabled","_updatingHandles","add","mergedFilter","E","checkSupport","_i3sFilter","viewFilter","layerFieldsIndex","fieldsIndex","loadAsyncModule","_loadAsyncModule","addSqlFilter","logError","addTimeFilter","renderer","definitionExpressionFields","filterExpressionFields","_updateRequiredFields","_rendererChange","_filterChange","parsedDefinitionExpression","_this$_i3sFilter","sortedObjectIds","_this$_i3sFilter2","parsedWhereClause","getTimeFilterDependencies","_this$_i3sFilter3","_this$filter","parsedGeometry","spatialRelationship","_geometryFilterChange","parsedFilterExpressions","_updateSymbologyOverride","addResolvingPromise","lodFactor","qualitySettings","sceneService","object","modelName","filterExpressions","map","_ref","create","getLogger","error","isStandardized","fieldNames","I","missingFields","length","concat","join","_get","_set","_this$_i3sFilter$upda","_this$_i3sFilter4","_setSymbologyOverride","testFeature","_","y","reduce","_ref2","Array","outFields","_graphicOrigin","graphicOrigin","_createLayerGraphic","attributes","sourceLayer","origin","C","effectiveScaleRange","scale","_controller","rootNodeVisible","fetchPopupFeaturesFromGraphics","_validateFetchPopupFeatures","associatedLayer","load","V","U","d","Set","g","push","catch","warn","whenGraphicAttributes","from","then","getRequiredFields","getFilters","_this$_i3sFilter5","addFilters","crsIndex","_collection","returnGeometry","outSpatialReference","spatialReference","f","_ensureQueryEngine","executeQueryForExtent","_ensureQuery","signal","executeQueryForCount","executeQuery","features","executeQueryForIds","m","_this$_queryEngine","_createQueryEngine","w","renderSpatialReference","x","priority","A","FEATURE_QUERY_ENGINE","spatialIndex","v","featureAdapter","S","objectIdField","attributeStorageInfo","getFeatureExtent","forAllFeatures","_forAllFeatures","j","sourceSpatialReference","Q","viewSpatialReference","_addDefinitionExpressionToQuery","h","String","sublayerViews","P","M","_rejectedSublayerViews","Map","_abortController","AbortController","_loadingComponents","_pendingWhenSublayerViews","ignoresMemoryFactor","filterExpression","_r$filterBlocks","activeFilterId","filters","find","filterBlocks","toArray","_e$filterExpression","updatingProgressValue","updatingProgress","visibleAtCurrentScale","some","viewingMode","_initializeSublayerViews","sublayers","destroy","forEach","isEmpty","geometryType","get","resolve","delete","addHandles","notifyChange","url","_rejectWhenSublayerView","getGraphicFromIntersectorTarget","items","set","_findComponent","flat","whenGraphicBounds","Promise","reject","getAABBFromIntersectorTarget","whenSublayerView","promise","usedMemory","unloadedMemory","performanceInfo","B","dependsOn"],"sourceRoot":""}